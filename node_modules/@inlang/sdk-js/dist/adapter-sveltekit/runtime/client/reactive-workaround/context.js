import { setContext } from "svelte";
import { get } from "svelte/store";
import { inlangSymbol } from "../../shared/utils.js";
import { getRuntimeFromContext as getRuntimeFromContextShared } from "../shared/context.js";
import { goto } from "$app/navigation";
import { page } from "$app/stores";
export const getRuntimeFromContext = () => getRuntimeFromContextShared();
export const addRuntimeToContext = (runtime) => {
    const { language, referenceLanguage, languages, i, loadResource } = runtime;
    const switchLanguage = async (language) => {
        if (runtime.language === language)
            return;
        localStorage.setItem("language", language);
        return goto(get(page).url, { invalidateAll: true });
    };
    setContext(inlangSymbol, {
        language,
        referenceLanguage,
        languages,
        i,
        loadResource,
        switchLanguage,
        route,
    });
};
// TODO: output warning during dev that calling this does not make sense
const route = (href) => {
    if (import.meta.env.DEV) {
        console.info(`Calling the function 'route' is unnecessary with this project configuration, because it only returns the input.`);
    }
    return href;
};
